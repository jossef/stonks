# סטונקס!

![image](https://github.com/user-attachments/assets/e0089ccf-7a6d-4d85-808e-b90e7eefb4c0)

## מה זה הפרויקט הזה?

אם אתם רוצים דרך קלה ונוחה לעקוב אחרי מחירים של מניות וקרנות בתוך Google Sheets מעבר למה שGoogle Finance תומך בו – זה הכלי בשבילכם. תעשו Fork, תתאימו את הקבצים למה שמעניין אתכם, ותנו לזה לרוץ אוטומטית. 

בשביל להמחיש כמה זה נח, יצרתי גיליון לדוגמה ב-Google Sheets:  
https://docs.google.com/spreadsheets/d/1bo6MEyI9WHOUDB5q21C4e9LLOmTX-fih-JIJPEGJE_Y/edit?usp=sharing

![image](https://github.com/user-attachments/assets/cddf7155-e575-46d2-9929-4c781bfcdd91)

⚠ **שימו לב**: אני לא יועץ פיננסי ואין פה המלצה להשקעה. נוצר לשימוש אישי. אני לא אחראי לכל הפסד כספי שעלול להיגרם כתוצאה משימוש בפרויקט הזה. השתמשו בו על אחריותכם בלבד.


## איך מתחילים?
אני עוקב רק אחרי המניות שמעניינות אותי. בכדי שתיצרו עוקב מניות כזה משל עצמכם, תתחילו מליצור חשבון בGitHub ואז:

### לעשות Fork
   - תלחצו על כפתור "Fork" של הפרוייקט הזה בכדי להעתיק את הריפו לחשבון שלכם.
   - תוודאו שGitHub Actions מופעל בהגדרות (אחרת לא יהיה משהו שיריץ את הסקריפט)

### להגדיר את המניות/קרנות שאתם רוצים לעקוב אחריהן
   - יש תיקייה בשם `symbols/` עם קבצי JSON שאני אישית עוקב אחריהם. כל קובץ מייצג נכס פיננסי אחד.
   - תשנו או תוסיפו קבצים בהתאם למה שמעניין אתכם. הסבר על המבנה בהמשך

### אופציונלי - להריץ מקומית ולבדוק שזה עובד
   - תריצו את הסקריפט:
     ```sh
     python main.py
     ```
   - אם אין שגיאות, הנתונים יישמרו בתיקייה `dist/`.
   - אם יש שגיאות - יכול להיות שמשהו נשבר ושמצאתם באג. אשמח לתיקון בחזרה במידה ונתקלתם בבאג

### להריץ את זה באופן אוטומטי בגיטהאב
   - הסקריפט רץ כל שעה דרך GitHub Actions 
   - אם אתם רוצים להפעיל אותו ידנית, אפשר לעשות את זה דרך הממשק .

![image](https://github.com/user-attachments/assets/f533be7a-c72e-4958-9601-abef1a425973)


## איך נראה קובץ סימבול (symbol)?

כל קובץ JSON ב-`symbols/` מכיל מידע במבנה הזה:

- **id** - המזהה של הסימבול בפרוייקט.
- **type** - איזה סוג זה:
  - `etf` - קרן סל.
  - `caspit` - קרן כספית.
- **source** - מאיפה הנתונים מגיעים:
  - `justetf` - מאתר JustETF.
  - `yahoo_finance` - מ-Yahoo Finance.
  - `issa` - הבורסה הישראלית.
- **symbol** - הקוד של הסימבול בבורסה.
- **currency** - באיזה מטבע נסחר.

### דוגמאות לקבצי סימבול
#### קרן סל מ (Yahoo Finance ([iShares MSCI ACWI UCITS ETF USD (Acc)](https://finance.yahoo.com/quote/ISAC.L/)

```json
{
  "id": "ISAC",
  "type": "etf",
  "source": "yahoo_finance",
  "symbol": "ISAC.L",
  "currency": "USD"
}
```
#### קרן כספית ישראלית ([אנליסט (00) כספית](https://maya.tase.co.il/he/funds/mutual-funds/5121140?view=reports))
```json
{
  "id": "5121140",
  "type": "caspit",
  "source": "issa",
  "symbol": "5121140",
  "currency": "ILS"
}
```

## איפה מוצאים את הנתונים אחרי שזה רץ?

אחרי שהריפו פרוס ב-GitHub Pages והסקריפט סיים לרוץ, הנתונים הם בצורת קבצים במנה תיקיות היררכי. אפשר לגשת לנתונים ישירות:
- מחיר עדכני: `https://<username>.github.io/stonks/<symbol id>/price`
- תאריך מחיר אחרון: `https://<username>.github.io/stonks/<symbol id>/date`
- מטבע המסחר: `https://<username>.github.io/stonks/<symbol id>/currency`
- קובץ JSON עם כל המידע: `https://<username>.github.io/stonks/<symbol id>/info.json`

**דוגמה** 
- סימבול: `ZPRX`
- מחיר נוכחי: `https://jossef.github.io/stonks/ZPRX/price`
- תאריך עדכון מחיר: `https://jossef.github.io/stonks/ZPRX/date`


## איך משלבים את זה ב-Google Sheets?

אפשר למשוך את הנתונים ישירות ל-Google Sheets עם `IMPORTDATA`:
```excel
=IMPORTDATA("https://jossef.github.io/stonks/ZPRX/price")
```
או לבנות את ה-URL לפי הסימבול שבטבלה:
```excel
=IMPORTDATA(CONCATENATE("https://jossef.github.io/stonks/", A2, "/price"))
```

> **חשוב לדעת**: גוגל עלול להציג אזהרת אבטחה. פשוט תלחצו "Allow Access" כדי לאפשר טעינת נתונים חיצוניים.

![image](https://github.com/user-attachments/assets/6a631429-9418-4962-9d5a-3f8910334d9c)

## מבנה הקוד

הפרויקט מאורגן בצורה מודולרית עם הפרדה ברורה בין אחריויות:

- `main.py` - נקודת הכניסה הראשית לתוכנית
- `stonks/` - חבילה המכילה את כל המודולים של הפרויקט:
  - `__init__.py` - קובץ האתחול של החבילה
  - `config.py` - הגדרות התצורה של האפליקציה
  - `models.py` - מודלי נתונים המשמשים בכל רחבי האפליקציה
  - `data_fetcher.py` - מחלקות לאיסוף נתונים ממקורות שונים
  - `storage.py` - פונקציות לשמירת נתונים
  - `utils.py` - פונקציות עזר שימושיות

הקוד משתמש בעקרונות תכנות מודרניים כמו:
- הפרדת אחריויות (Separation of Concerns)
- עקרונות SOLID
- טיפוסי נתונים סטטיים (Type Hints)
- תיעוד מקיף
- טיפול בשגיאות מתקדם

## רקע בהרחבה
מסתבר שלעקוב אחרי מניות ותעודות סל **שלא נסחרות בארה"ב** בתוך Google Sheets זה לא דבר שנתמך במלואו. Google Finance לא מכסה את כל מה שמעניין אותי ועוד משקיעים ישראלים רבים. 

בעוד שחלק מהמקורות המידע הקיימים מציבים הגבלות על איסוף נתונים באופן ישיר מתוך Google Sheets (כמו אתר הבורסה לניירות ערך תל אביב שבנו בובה של API אבל רק לאתר שלהם מותר לקרוא לו) - בניתי פתרון משלי שפותח דפדפן, גולש אל מקור המידע, טוען את האתר, ומחלץ משם את הנתון המעניין. כל זה בחינם לגמרי בחסות GitHub.

הפרוייקט הזה אוסף נתוני מניות וקרנות ממקורות שונים, מנרמל אותם ומשתמש בשירותי האירוח החינמיים של GitHub בשביל להנגיש לי את המידע בפשטות ובאחדות לגליון ה-Google Sheets שלי, בו אני מתעד את תיק ההשקעות שלי. 

הקוד בפרוייקט הזה מאורגן בצורה מודולרית ונוחה לתחזוקה. הוא מתוכנן לרוץ ברקע על מחשוב חינמי של GitHub, כך שיעילות זמן הריצה היא פחות קריטית.

אם אתם רוצים דרך קלה ונוחה לעקוב אחרי מחירים של מניות וקרנות – זה הכלי בשבילכם. תעשו Fork, תתאימו את הקבצים למה שמעניין אתכם, ותנו לזה לרוץ אוטומטית. 

🎯 שיהיה בהצלחה! 🚀
